# generated by datamodel-codegen:
#   filename:  action-configs.json
#   timestamp: 2026-02-03T06:38:45+00:00

from __future__ import annotations

from enum import StrEnum
from typing import Any

from pydantic import AnyUrl, BaseModel, Field, confloat, conint, constr


class BaseActionConfig(BaseModel):
    image: str | None = None
    """
    Base64 encoded reference image
    """


class ClickType(StrEnum):
    """
    Type of click to perform
    """

    left = "left"
    right = "right"


class ClickConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for element to click
    """
    waitTime: int | None = 1000
    """
    Wait time in milliseconds
    """
    forceClick: bool | None = False
    """
    Force click even if element not clickable
    """
    scrollIntoView: bool | None = True
    """
    Scroll element into view before clicking
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """
    clickType: ClickType | None = "left"
    """
    Type of click to perform
    """
    clickCount: conint(ge=1) | None = 1
    """
    Number of clicks to perform
    """
    clickAndHold: bool | None = False
    """
    Whether to click and hold
    """
    holdDuration: int | None = 1000
    """
    Duration to hold click in milliseconds
    """


class InputConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for input element
    """
    text: str
    """
    Text to input
    """
    clearFirst: bool | None = True
    """
    Clear field before typing
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """
    scrollIntoView: bool | None = True
    """
    Scroll element into view
    """


class NavigateConfig(BaseActionConfig):
    url: AnyUrl
    """
    URL to navigate to
    """
    waitForLoad: bool | None = True
    """
    Wait for page to load
    """
    takeScreenshot: bool | None = False
    """
    Take screenshot after navigation
    """


class WaitType(StrEnum):
    """
    Type of wait to perform
    """

    duration = "duration"
    element = "element"
    interactable = "interactable"


class WaitConfig(BaseActionConfig):
    waitType: WaitType | None = "duration"
    """
    Type of wait to perform
    """
    duration: int | None = 3000
    """
    Duration to wait in milliseconds
    """
    selector: str | None = None
    """
    CSS selector for element to wait for
    """
    timeout: int | None = 10000
    """
    Maximum time to wait in milliseconds
    """
    waitForInteractable: bool | None = False
    """
    Wait for element to be interactable
    """
    fallbackToDuration: bool | None = True
    """
    Fallback to duration wait if element wait fails
    """
    fallbackDuration: int | None = 2000
    """
    Duration to wait if fallback triggered
    """


class AssertType(StrEnum):
    """
    Type of assertion
    """

    exists = "exists"
    visible = "visible"
    text = "text"
    value = "value"
    attribute = "attribute"


class AssertionConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for element
    """
    assertType: AssertType | None = "exists"
    """
    Type of assertion
    """
    expectedValue: str
    """
    Expected value for assertion
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """
    caseSensitive: bool | None = False
    """
    Case sensitive comparison
    """
    partialMatch: bool | None = False
    """
    Allow partial text matching
    """


class ScreenshotType(StrEnum):
    """
    Type of screenshot to capture
    """

    viewport = "viewport"
    fullPage = "fullPage"
    element = "element"


class Format(StrEnum):
    """
    Output format
    """

    png = "png"
    jpg = "jpg"


class ScreenshotConfig(BaseActionConfig):
    screenshotType: ScreenshotType | None = "viewport"
    """
    Type of screenshot to capture
    """
    selector: str | None = None
    """
    CSS selector for element screenshots
    """
    filename: str | None = "screenshot.png"
    """
    Output filename
    """
    saveToFile: bool | None = True
    """
    Save screenshot to file system
    """
    includeTimestamp: bool | None = True
    """
    Include timestamp in filename
    """
    format: Format | None = "png"
    """
    Output format
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """
    scrollIntoView: bool | None = True
    """
    Scroll element into view
    """
    fullPage: bool | None = False
    """
    Take full page screenshot
    """


class Type(StrEnum):
    """
    Type of form field
    """

    text = "text"
    password = "password"
    email = "email"
    number = "number"
    tel = "tel"
    textarea = "textarea"
    date = "date"
    time = "time"
    datetime_local = "datetime-local"
    checkbox = "checkbox"
    radio = "radio"
    select = "select"
    file = "file"


class FormFieldOption(BaseModel):
    value: str
    """
    Option value
    """
    label: str
    """
    Option label
    """


class Method(StrEnum):
    """
    HTTP method
    """

    GET = "GET"
    POST = "POST"
    PUT = "PUT"
    DELETE = "DELETE"
    PATCH = "PATCH"


class ApiCallConfig(BaseActionConfig):
    method: Method | None = "GET"
    """
    HTTP method
    """
    url: AnyUrl
    """
    API endpoint URL
    """
    headers: dict[str, str] | None = None
    """
    HTTP headers
    """
    body: str | None = None
    """
    Request body
    """
    outputVariable: str | None = "apiResponse"
    """
    Variable to store response
    """
    timeout: int | None = 30000
    """
    Request timeout in milliseconds
    """
    retryCount: int | None = 0
    """
    Number of retries
    """
    parseJson: bool | None = True
    """
    Parse response as JSON
    """
    validateStatus: bool | None = True
    """
    Validate HTTP status code
    """
    followRedirects: bool | None = True
    """
    Follow HTTP redirects
    """
    verifySSL: bool | None = True
    """
    Verify SSL certificates
    """
    basicAuthUsername: str | None = None
    """
    Basic auth username
    """
    basicAuthPassword: str | None = None
    """
    Basic auth password
    """


class DatabaseQueryConfig(BaseActionConfig):
    connectionString: str
    """
    Database connection string
    """
    query: str
    """
    SQL query to execute
    """
    outputVariable: str | None = "queryResult"
    """
    Variable to store result
    """
    logQuery: bool | None = True
    """
    Log the query being executed
    """
    validateConnection: bool | None = True
    """
    Validate database connection
    """
    timeout: int | None = 30000
    """
    Query timeout in milliseconds
    """


class DatabaseInsertConfig(BaseActionConfig):
    connectionString: str
    """
    Database connection string
    """
    table: str
    """
    Table name to insert into
    """
    data: dict[str, Any]
    """
    Data to insert (column-value pairs)
    """
    logOperation: bool | None = True
    """
    Log the insert operation
    """
    validateConnection: bool | None = True
    """
    Validate database connection
    """
    rollbackOnError: bool | None = True
    """
    Rollback transaction on error
    """


class FileUploadConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for file input
    """
    filePath: str
    """
    Path to file to upload
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """
    scrollIntoView: bool | None = True
    """
    Scroll element into view
    """
    validateFile: bool | None = True
    """
    Validate file exists before upload
    """


class FileDownloadConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for download link
    """
    downloadPath: str
    """
    Path to save downloaded file
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """
    validateDownload: bool | None = True
    """
    Validate download completed
    """
    overwriteExisting: bool | None = False
    """
    Overwrite existing files
    """


class CustomCodeConfig(BaseActionConfig):
    code: str
    """
    JavaScript code to execute
    """
    outputVariable: str | None = "customResult"
    """
    Variable to store result
    """
    logExecution: bool | None = True
    """
    Log code execution
    """
    catchErrors: bool | None = True
    """
    Catch and handle errors
    """
    timeout: int | None = 30000
    """
    Execution timeout in milliseconds
    """


class SubflowConfig(BaseActionConfig):
    flowId: str
    """
    ID of flow to call
    """
    flowName: str | None = None
    """
    Name of flow to call
    """
    inputParameters: list[dict[str, Any]] | None = None
    """
    Input parameters for subflow
    """
    outputParameters: list[dict[str, Any]] | None = None
    """
    Output parameters from subflow
    """
    outputVariable: str | None = "flowResult"
    """
    Variable to store result
    """
    waitForCompletion: bool | None = True
    """
    Wait for flow to complete
    """
    logExecution: bool | None = True
    """
    Log flow execution
    """
    propagateErrors: bool | None = True
    """
    Propagate errors from subflow
    """


class SendKeysConfig(BaseActionConfig):
    selector: str | None = None
    """
    CSS selector for element to send keys to
    """
    keys: str
    """
    Keys to send
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """


class Direction(StrEnum):
    """
    Scroll direction
    """

    up = "up"
    down = "down"
    left = "left"
    right = "right"


class ScrollConfig(BaseActionConfig):
    direction: Direction | None = "down"
    """
    Scroll direction
    """
    distance: int | None = 100
    """
    Scroll distance in pixels
    """
    selector: str | None = None
    """
    Element to scroll (optional, defaults to window)
    """


class AssertVisibleConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for element to check
    """
    timeout: int | None = 5000
    """
    Timeout in milliseconds
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """


class ClearInputConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for input element
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """


class OpenNewTabConfig(BaseActionConfig):
    url: str
    """
    URL to open in new tab
    """


class SwitchTabConfig(BaseActionConfig):
    tabIndex: conint(ge=0) | None = None
    """
    Tab index to switch to
    """
    tabTitle: str | None = None
    """
    Tab title to switch to (alternative to index)
    """


class GoForwardConfig(BaseActionConfig):
    pass


class GoBackConfig(BaseActionConfig):
    pass


class RefreshConfig(BaseActionConfig):
    pass


class GetPageInfoConfig(BaseActionConfig):
    outputVariable: str | None = "pageInfo"
    """
    Variable to store page information
    """


class JunctionConfig(BaseActionConfig):
    condition: str | None = None
    """
    Condition to evaluate
    """
    truePath: str | None = None
    """
    Path to take if condition is true
    """
    falsePath: str | None = None
    """
    Path to take if condition is false
    """


class ConditionalConfig(BaseActionConfig):
    condition: str
    """
    JavaScript condition to evaluate
    """
    thenActions: list[dict[str, Any]] | None = None
    """
    Actions to execute if condition is true
    """
    elseActions: list[dict[str, Any]] | None = None
    """
    Actions to execute if condition is false
    """


class LoopType(StrEnum):
    """
    Type of loop
    """

    count_ = "count"
    condition = "condition"
    foreach = "foreach"


class LoopConfig(BaseActionConfig):
    loopType: LoopType | None = "count"
    """
    Type of loop
    """
    count: conint(ge=1) | None = None
    """
    Number of iterations (for count loops)
    """
    condition: str | None = None
    """
    Condition to continue loop (for condition loops)
    """
    arrayVariable: str | None = None
    """
    Variable containing array to iterate (for foreach loops)
    """
    itemVariable: str | None = "item"
    """
    Variable name for current item (for foreach loops)
    """
    actions: list[dict[str, Any]]
    """
    Actions to execute in each iteration
    """
    maxIterations: conint(ge=1) | None = 100
    """
    Maximum iterations to prevent infinite loops
    """


class DragAndDropConfig(BaseActionConfig):
    sourceSelector: str
    """
    CSS selector for element to drag
    """
    targetSelector: str
    """
    CSS selector for drop target
    """
    waitForElement: bool | None = True
    """
    Wait for elements to be present
    """


class CallToFlowConfig(BaseActionConfig):
    flowId: str
    """
    ID of flow to call
    """
    inputParameters: dict[str, Any] | None = None
    """
    Input parameters to pass to subflow
    """
    outputVariable: str | None = "flowResult"
    """
    Variable to store result
    """
    waitForCompletion: bool | None = True
    """
    Wait for subflow to complete
    """
    async_: bool | None = Field(False, alias="async")
    """
    Execute subflow asynchronously
    """


class SwitchToFrameConfig(BaseActionConfig):
    frameSelector: str | None = None
    """
    CSS selector or frame name/ID
    """
    frameIndex: conint(ge=0) | None = None
    """
    Frame index (alternative to selector)
    """


class ExitFrameConfig(BaseActionConfig):
    pass


class ViewportType(StrEnum):
    """
    Type of viewport configuration
    """

    preset = "preset"
    device = "device"
    responsive = "responsive"
    custom = "custom"


class SetViewportConfig(BaseActionConfig):
    viewportType: ViewportType | None = "custom"
    """
    Type of viewport configuration
    """
    width: conint(ge=1)
    """
    Viewport width in pixels
    """
    height: conint(ge=1)
    """
    Viewport height in pixels
    """
    screenSizePreset: str | None = None
    """
    Preset screen size name
    """
    deviceName: str | None = None
    """
    Device name for emulation
    """
    deviceScaleFactor: confloat(ge=0.1, le=5.0) | None = 1.0
    """
    Device scale factor
    """
    isMobile: bool | None = False
    """
    Emulate mobile device
    """
    hasTouch: bool | None = False
    """
    Enable touch events
    """
    isLandscape: bool | None = False
    """
    Use landscape orientation
    """
    userAgent: str | None = None
    """
    Custom user agent string
    """
    waitAfterResize: bool | None = True
    """
    Wait after viewport resize
    """
    takeScreenshot: bool | None = False
    """
    Take screenshot after resize
    """


class Property(StrEnum):
    text = "text"
    value = "value"
    class_ = "class"
    id = "id"
    tagName = "tagName"
    innerHTML = "innerHTML"
    outerHTML = "outerHTML"
    attributes = "attributes"
    rect = "rect"
    visible = "visible"
    enabled = "enabled"
    selected = "selected"


class GetElementPropertiesConfig(BaseActionConfig):
    selector: str
    """
    CSS selector for element
    """
    properties: list[Property]
    """
    Properties to retrieve
    """
    outputVariable: str | None = "elementProps"
    """
    Variable to store properties
    """
    waitForElement: bool | None = True
    """
    Wait for element to be present
    """


class Action(StrEnum):
    """
    Action to perform on popup
    """

    accept = "accept"
    dismiss = "dismiss"
    text = "text"


class HandlePopupConfig(BaseActionConfig):
    action: Action | None = "accept"
    """
    Action to perform on popup
    """
    text: str | None = None
    """
    Text to enter in prompt popup
    """
    waitForPopup: bool | None = True
    """
    Wait for popup to appear
    """
    timeout: int | None = 5000
    """
    Timeout in milliseconds
    """


class FormField(BaseModel):
    selector: str
    """
    CSS selector to target form field
    """
    value: Any
    """
    Value to fill
    """
    image: str | None = None
    """
    Optional screenshot path
    """
    name: str | None = None
    """
    Human-readable field name
    """
    type: Type | None = "text"
    """
    Type of form field
    """
    options: list[FormFieldOption] | None = None
    """
    Options for select/radio fields
    """
    checked: bool | None = False
    """
    Whether checkbox is checked
    """
    multiple: bool | None = False
    """
    Whether select allows multiple selections
    """


class FormFillConfig(BaseActionConfig):
    fields: list[FormField]
    """
    Array of form field configurations
    """
    waitForElements: bool | None = True
    """
    Wait for all form elements to be present
    """
    clearFirst: bool | None = True
    """
    Clear existing values before filling
    """
    submitAfterFill: bool | None = False
    """
    Automatically submit form after filling
    """
    smartFieldDetection: bool | None = True
    """
    Automatically detect field types
    """


class ActionConfigurations(BaseModel):
    """
    Configuration schemas for all automation actions
    """

    actionConfigs: (
        dict[
            constr(pattern=r".*"),
            ClickConfig
            | InputConfig
            | SendKeysConfig
            | WaitConfig
            | NavigateConfig
            | ScrollConfig
            | ScreenshotConfig
            | AssertionConfig
            | AssertVisibleConfig
            | FormFillConfig
            | ClearInputConfig
            | OpenNewTabConfig
            | SwitchTabConfig
            | GoForwardConfig
            | GoBackConfig
            | RefreshConfig
            | GetPageInfoConfig
            | JunctionConfig
            | ApiCallConfig
            | ConditionalConfig
            | LoopConfig
            | DatabaseQueryConfig
            | DatabaseInsertConfig
            | CustomCodeConfig
            | DragAndDropConfig
            | CallToFlowConfig
            | SwitchToFrameConfig
            | ExitFrameConfig
            | SetViewportConfig
            | GetElementPropertiesConfig
            | HandlePopupConfig
            | FileUploadConfig
            | FileDownloadConfig
            | SubflowConfig,
        ]
        | None
    ) = None
